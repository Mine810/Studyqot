<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biology Quiz - Class 10</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.1);
        }
        .quiz-option.selected {
            background-color: #0891b2; /* Cyan 600 */
            border-color: #06b6d4; /* Cyan 500 */
        }
        .btn-primary {
            transition: all 0.2s ease-in-out;
        }
        .btn-primary:hover {
            transform: scale(1.05);
        }
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 flex items-center justify-center min-h-screen p-4">

    <div id="main-container" class="w-full max-w-4xl mx-auto">

        <!-- Language Selection Screen -->
        <div id="language-screen" class="text-center">
            <h1 class="text-4xl font-extrabold text-white mb-8">Choose your language</h1>
            <div class="flex justify-center gap-6">
                <button onclick="selectLanguage('en')" class="btn-primary bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-8 rounded-xl text-2xl shadow-lg">English üá¨üáß</button>
                <button onclick="selectLanguage('hi')" class="btn-primary bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 px-8 rounded-xl text-2xl shadow-lg">Hindi üáÆüá≥</button>
            </div>
        </div>

        <!-- Name Input Screen -->
        <div id="name-screen" class="hidden text-center">
            <h1 id="name-prompt" class="text-4xl font-extrabold text-white mb-6"></h1>
            <input type="text" id="name-input" class="text-center bg-gray-800 border-2 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500 text-white text-2xl rounded-lg p-3 w-full max-w-md mx-auto" placeholder="">
            <button id="start-quiz-btn" onclick="startQuiz()" class="btn-primary mt-6 bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-10 rounded-xl text-xl shadow-lg"></button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden bg-gray-800 p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700">
            <div class="flex justify-between items-center mb-6">
                <div id="progress-text" class="text-lg font-bold text-cyan-400"></div>
                <div id="timer" class="text-xl font-bold bg-gray-900 px-4 py-2 rounded-lg text-white">00:00</div>
            </div>
            <div id="question-container" class="mb-6">
                <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-white mb-6 min-h-[100px]"></h2>
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Options will be injected here -->
                </div>
            </div>
            <div class="flex justify-end mt-8">
                <button id="submit-btn" onclick="submitQuiz()" class="btn-primary bg-red-600 hover:bg-red-500 text-white font-bold py-3 px-12 rounded-lg text-lg shadow-lg"></button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden bg-gray-800 p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700">
            <h1 id="result-title" class="text-4xl font-extrabold text-center text-white mb-6"></h1>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-8">
                <div class="bg-gray-900 p-4 rounded-lg">
                    <p id="score-label" class="text-gray-400 text-sm font-bold uppercase"></p>
                    <p id="score" class="text-3xl font-bold text-green-400"></p>
                </div>
                <div class="bg-gray-900 p-4 rounded-lg">
                    <p id="time-label" class="text-gray-400 text-sm font-bold uppercase"></p>
                    <p id="time-taken" class="text-3xl font-bold text-cyan-400"></p>
                </div>
                <div class="bg-gray-900 p-4 rounded-lg">
                    <p id="accuracy-label" class="text-gray-400 text-sm font-bold uppercase"></p>
                    <p id="accuracy" class="text-3xl font-bold text-yellow-400"></p>
                </div>
            </div>
            <div id="telegram-status" class="text-center my-4 font-semibold"></div>
            <h2 id="review-title" class="text-2xl font-bold text-center text-white mt-8 mb-4"></h2>
            <div id="review-container" class="space-y-4 max-h-[40vh] overflow-y-auto no-scrollbar pr-2">
                <!-- Review content will be injected here -->
            </div>
        </div>

    </div>

    <script>
        // --- QUIZ DATA ---
        const quizData = [
            // Life Processes
            { q: { en: "In which part of the alimentary canal is food completely digested?", hi: "‡§Ü‡§π‡§æ‡§∞‡§®‡§æ‡§≤ ‡§ï‡•á ‡§ï‡§ø‡§∏ ‡§≠‡§æ‡§ó ‡§Æ‡•á‡§Ç ‡§≠‡•ã‡§ú‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡§æ‡§ö‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Stomach", "Small intestine", "Large intestine", "Rectum"], hi: ["‡§Ü‡§Æ‡§æ‡§∂‡§Ø", "‡§õ‡•ã‡§ü‡•Ä ‡§Ü‡§Ç‡§§", "‡§¨‡§°‡§º‡•Ä ‡§Ü‡§Ç‡§§", "‡§Æ‡§≤‡§æ‡§∂‡§Ø"] }, a: 1 },
            { q: { en: "Which of the following is responsible for the green color of plants?", hi: "‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•á ‡§π‡§∞‡•á ‡§∞‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•å‡§® ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞ ‡§π‡•à?" }, o: { en: ["Leucoplast", "Chlorophyll", "Chromoplast", "None of these"], hi: ["‡§≤‡•ç‡§Ø‡•Ç‡§ï‡•ã‡§™‡•ç‡§≤‡§æ‡§∏‡•ç‡§ü", "‡§ï‡•ç‡§≤‡•ã‡§∞‡•ã‡§´‡§ø‡§≤", "‡§ï‡•ç‡§∞‡•ã‡§Æ‡•ã‡§™‡•ç‡§≤‡§æ‡§∏‡•ç‡§ü", "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"] }, a: 1 },
            { q: { en: "The breakdown of pyruvate to give carbon dioxide, water, and energy takes place in:", hi: "‡§™‡§æ‡§á‡§∞‡•Å‡§µ‡•á‡§ü ‡§ï‡§æ ‡§µ‡§ø‡§ñ‡§Ç‡§°‡§® ‡§π‡•ã‡§ï‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§¨‡§® ‡§°‡§æ‡§á‡§ë‡§ï‡•ç‡§∏‡§æ‡§á‡§°, ‡§ú‡§≤ ‡§§‡§•‡§æ ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§¶‡•á‡§®‡§æ, ‡§Ø‡§π ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à:" }, o: { en: ["Cytoplasm", "Mitochondria", "Chloroplast", "Nucleus"], hi: ["‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø ‡§Æ‡•á‡§Ç", "‡§Æ‡§æ‡§á‡§ü‡•ã‡§ï‡•â‡§®‡•ç‡§°‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç", "‡§π‡§∞‡§ø‡§§‡§≤‡§µ‡§ï ‡§Æ‡•á‡§Ç", "‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ï ‡§Æ‡•á‡§Ç"] }, a: 1 },
            { q: { en: "Which of these is the main site for the exchange of gases in the lungs?", hi: "‡§´‡•á‡§´‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ó‡•à‡§∏‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§¶‡§æ‡§®-‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§æ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∏‡•ç‡§•‡§≤ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?" }, o: { en: ["Trachea", "Bronchi", "Alveoli", "Diaphragm"], hi: ["‡§∂‡•ç‡§µ‡§æ‡§∏‡§®‡§≤‡•Ä", "‡§¨‡•ç‡§∞‡•ã‡§®‡•ç‡§ï‡§æ‡§à", "‡§µ‡§æ‡§Ø‡•Å‡§ï‡•ã‡§∑‡•ç‡§†‡§ø‡§ï‡§æ (‡§è‡§≤‡•ç‡§µ‡§ø‡§Ø‡•ã‡§≤‡•Ä)", "‡§°‡§æ‡§Ø‡§æ‡§´‡•ç‡§∞‡§æ‡§Æ"] }, a: 2 },
            { q: { en: "The autotrophic mode of nutrition requires:", hi: "‡§∏‡•ç‡§µ‡§™‡•ã‡§∑‡•Ä ‡§™‡•ã‡§∑‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à:" }, o: { en: ["Carbon dioxide and water", "Chlorophyll", "Sunlight", "All of the above"], hi: ["‡§ï‡§æ‡§∞‡•ç‡§¨‡§® ‡§°‡§æ‡§á‡§ë‡§ï‡•ç‡§∏‡§æ‡§á‡§° ‡§§‡§•‡§æ ‡§ú‡§≤", "‡§ï‡•ç‡§≤‡•ã‡§∞‡•ã‡§´‡§ø‡§≤", "‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂", "‡§â‡§™‡§∞‡•ã‡§ï‡•ç‡§§ ‡§∏‡§≠‡•Ä"] }, a: 3 },
            { q: { en: "The function of xylem in plants is:", hi: "‡§™‡•å‡§ß‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§á‡§≤‡§Æ ‡§ï‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à:" }, o: { en: ["Transport of water", "Transport of food", "Transport of amino acids", "Transport of oxygen"], hi: ["‡§ú‡§≤ ‡§ï‡§æ ‡§µ‡§π‡§®", "‡§≠‡•ã‡§ú‡§® ‡§ï‡§æ ‡§µ‡§π‡§®", "‡§Ö‡§Æ‡•Ä‡§®‡•ã ‡§Ö‡§Æ‡•ç‡§≤ ‡§ï‡§æ ‡§µ‡§π‡§®", "‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ú‡§® ‡§ï‡§æ ‡§µ‡§π‡§®"] }, a: 0 },
            { q: { en: "The filtration units of the kidneys are called:", hi: "‡§µ‡•É‡§ï‡•ç‡§ï ‡§ï‡•Ä ‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§è‡§µ‡§Ç ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ï ‡§á‡§ï‡§æ‡§à ‡§ï‡•ã ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç:" }, o: { en: ["Ureter", "Urethra", "Neuron", "Nephron"], hi: ["‡§Æ‡•Ç‡§§‡•ç‡§∞‡§µ‡§æ‡§π‡§ø‡§®‡•Ä", "‡§Æ‡•Ç‡§§‡•ç‡§∞‡§Æ‡§æ‡§∞‡•ç‡§ó", "‡§®‡•ç‡§Ø‡•Ç‡§∞‡•â‡§®", "‡§®‡•á‡§´‡•ç‡§∞‡•â‡§®"] }, a: 3 },
            { q: { en: "Which enzyme is found in saliva?", hi: "‡§≤‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∏‡§æ ‡§è‡§Ç‡§ú‡§æ‡§á‡§Æ ‡§™‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Pepsin", "Trypsin", "Amylase (Ptyalin)", "Lipase"], hi: ["‡§™‡•á‡§™‡•ç‡§∏‡§ø‡§®", "‡§ü‡•ç‡§∞‡§ø‡§™‡•ç‡§∏‡§ø‡§®", "‡§è‡§Æ‡§æ‡§á‡§≤‡•á‡§ú (‡§ü‡§æ‡§Ø‡§≤‡§ø‡§®)", "‡§≤‡§æ‡§á‡§™‡•á‡§ú"] }, a: 2 },
            { q: { en: "The opening and closing of the stomatal pore is a function of:", hi: "‡§∞‡§Ç‡§ß‡•ç‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§ñ‡•Å‡§≤‡§®‡§æ ‡§î‡§∞ ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§®‡§æ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à:" }, o: { en: ["Epidermal cells", "Guard cells", "Companion cells", "Sieve tubes"], hi: ["‡§è‡§™‡§ø‡§°‡§∞‡•ç‡§Æ‡§≤ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§™‡§∞", "‡§¶‡•ç‡§µ‡§æ‡§∞ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§™‡§∞", "‡§∏‡§π‡§ö‡§∞ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§™‡§∞", "‡§ö‡§æ‡§≤‡§®‡•Ä ‡§®‡§≤‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§™‡§∞"] }, a: 1 },
            { q: { en: "Which component of blood is responsible for blood clotting?", hi: "‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§•‡§ï‡•ç‡§ï‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∏‡§æ ‡§Ö‡§µ‡§Ø‡§µ ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•ã‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Red Blood Cells (RBC)", "White Blood Cells (WBC)", "Plasma", "Platelets"], hi: ["‡§≤‡§æ‡§≤ ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ‡§è‡§Ç (RBC)", "‡§∂‡•ç‡§µ‡•á‡§§ ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ‡§è‡§Ç (WBC)", "‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ", "‡§™‡•ç‡§≤‡•á‡§ü‡§≤‡•á‡§ü‡•ç‡§∏"] }, a: 3 },
            { q: { en: "Which of the following is a plant hormone?", hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•å‡§® ‡§è‡§ï ‡§™‡§æ‡§¶‡§™ ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§® ‡§π‡•à?" }, o: { en: ["Insulin", "Thyroxine", "Estrogen", "Cytokinin"], hi: ["‡§á‡§Ç‡§∏‡•Å‡§≤‡§ø‡§®", "‡§•‡§æ‡§Ø‡§∞‡•ã‡§ï‡•ç‡§∏‡§ø‡§®", "‡§è‡§∏‡•ç‡§ü‡•ç‡§∞‡•ã‡§ú‡§®", "‡§∏‡§æ‡§á‡§ü‡•ã‡§ï‡§ø‡§®‡§ø‡§®"] }, a: 3 },
            { q: { en: "The heart of a fish has how many chambers?", hi: "‡§Æ‡§õ‡§≤‡•Ä ‡§ï‡•á ‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§∑‡•ç‡§†‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?" }, o: { en: ["One", "Two", "Three", "Four"], hi: ["‡§è‡§ï", "‡§¶‡•ã", "‡§§‡•Ä‡§®", "‡§ö‡§æ‡§∞"] }, a: 1 },
            { q: { en: "In which form is most of the waste product excreted by plants?", hi: "‡§™‡•å‡§ß‡•á ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§Ö‡§™‡§∂‡§ø‡§∑‡•ç‡§ü ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡•ã‡§Ç ‡§ï‡•ã ‡§ï‡§ø‡§∏ ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§â‡§§‡•ç‡§∏‡§∞‡•ç‡§ú‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç?" }, o: { en: ["Gums and Resins", "Through transpiration", "By shedding leaves", "All of the above"], hi: ["‡§ó‡•ã‡§Ç‡§¶ ‡§î‡§∞ ‡§∞‡•á‡§ú‡§ø‡§®", "‡§µ‡§æ‡§∑‡•ç‡§™‡•ã‡§§‡•ç‡§∏‡§∞‡•ç‡§ú‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ", "‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡§æ‡§Å ‡§ó‡§ø‡§∞‡§æ‡§ï‡§∞", "‡§â‡§™‡§∞‡•ã‡§ï‡•ç‡§§ ‡§∏‡§≠‡•Ä"] }, a: 3 },
            { q: { en: "What is the normal blood pressure in humans?", hi: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™ ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?" }, o: { en: ["80/120 mm Hg", "120/80 mm Hg", "100/60 mm Hg", "140/90 mm Hg"], hi: ["80/120 mm Hg", "120/80 mm Hg", "100/60 mm Hg", "140/90 mm Hg"] }, a: 1 },
            { q: { en: "The process of digestion starts from:", hi: "‡§™‡§æ‡§ö‡§® ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?" }, o: { en: ["Stomach", "Oesophagus", "Mouth", "Small Intestine"], hi: ["‡§Ü‡§Æ‡§æ‡§∂‡§Ø", "‡§ó‡•ç‡§∞‡§æ‡§∏‡§®‡§≤‡•Ä", "‡§Æ‡•Å‡§ñ", "‡§õ‡•ã‡§ü‡•Ä ‡§Ü‡§Ç‡§§"] }, a: 2 },
            // Control and Coordination
            { q: { en: "Which part of the brain is responsible for maintaining posture and balance of the body?", hi: "‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§≠‡§æ‡§ó ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§§‡§•‡§æ ‡§∏‡§Ç‡§§‡•Å‡§≤‡§® ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§∞‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Cerebrum", "Cerebellum", "Medulla", "Pons"], hi: ["‡§™‡•ç‡§∞‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï", "‡§Ö‡§®‡•Å‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï", "‡§Æ‡•á‡§°‡•Å‡§≤‡§æ", "‡§™‡•ã‡§®‡•ç‡§∏"] }, a: 1 },
            { q: { en: "The gap between two neurons is called a:", hi: "‡§¶‡•ã ‡§®‡•ç‡§Ø‡•Ç‡§∞‡•â‡§®‡•ã‡§Ç ‡§ï‡•á ‡§Æ‡§ß‡•ç‡§Ø ‡§ñ‡§æ‡§≤‡•Ä ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•ã ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç:" }, o: { en: ["Dendrite", "Synapse", "Axon", "Impulse"], hi: ["‡§°‡•á‡§Ç‡§°‡•ç‡§∞‡§æ‡§á‡§ü", "‡§∏‡§ø‡§®‡•á‡§™‡•ç‡§∏", "‡§è‡§ï‡•ç‡§∏‡•â‡§®", "‡§Ü‡§µ‡•á‡§ó"] }, a: 1 },
            { q: { en: "Which of the following is not an endocrine gland?", hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•å‡§® ‡§Ö‡§Ç‡§§‡§É‡§∏‡•ç‡§∞‡§æ‡§µ‡•Ä ‡§ó‡•ç‡§∞‡§Ç‡§•‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?" }, o: { en: ["Pituitary", "Thyroid", "Salivary gland", "Adrenal"], hi: ["‡§™‡•Ä‡§Ø‡•Ç‡§∑", "‡§•‡§æ‡§Ø‡§∞‡•â‡§á‡§°", "‡§≤‡§æ‡§∞ ‡§ó‡•ç‡§∞‡§Ç‡§•‡§ø", "‡§Ö‡§ß‡§ø‡§µ‡•É‡§ï‡•ç‡§ï"] }, a: 2 },
            { q: { en: "Which hormone is responsible for the growth of the stem in plants?", hi: "‡§™‡•å‡§ß‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§§‡§®‡•á ‡§ï‡•Ä ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§® ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞ ‡§π‡•à?" }, o: { en: ["Auxin", "Gibberellin", "Abscisic acid", "Cytokinin"], hi: ["‡§ë‡§ï‡•ç‡§∏‡§ø‡§®", "‡§ú‡§ø‡§¨‡§∞‡•á‡§≤‡§ø‡§®", "‡§è‡§¨‡•ç‡§∏‡§ø‡§∏‡§ø‡§ï ‡§Ö‡§Æ‡•ç‡§≤", "‡§∏‡§æ‡§á‡§ü‡•ã‡§ï‡§ø‡§®‡§ø‡§®"] }, a: 0 },
            { q: { en: "The deficiency of which hormone causes goitre?", hi: "‡§ï‡§ø‡§∏ ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§∏‡•á ‡§ò‡•á‡§Ç‡§ò‡§æ ‡§∞‡•ã‡§ó ‡§π‡•ã‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Insulin", "Adrenaline", "Thyroxine", "Growth hormone"], hi: ["‡§á‡§Ç‡§∏‡•Å‡§≤‡§ø‡§®", "‡§è‡§°‡•ç‡§∞‡•á‡§®‡§æ‡§≤‡§æ‡§à‡§®", "‡§•‡§æ‡§Ø‡§∞‡•ã‡§ï‡•ç‡§∏‡§ø‡§®", "‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§®"] }, a: 2 },
            { q: { en: "The growth of a pollen tube towards the ovule is an example of:", hi: "‡§™‡§∞‡§æ‡§ó ‡§®‡§≤‡§ø‡§ï‡§æ ‡§ï‡§æ ‡§¨‡•Ä‡§ú‡§æ‡§Ç‡§° ‡§ï‡•Ä ‡§ì‡§∞ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§ï‡§∞‡§®‡§æ ‡§ï‡§ø‡§∏‡§ï‡§æ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§π‡•à?" }, o: { en: ["Phototropism", "Geotropism", "Hydrotropism", "Chemotropism"], hi: ["‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®", "‡§ó‡•Å‡§∞‡•Å‡§§‡•ç‡§µ‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®", "‡§ú‡§≤‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®", "‡§∞‡§∏‡§æ‡§Ø‡§®‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®"] }, a: 3 },
            { q: { en: "Which part of the brain controls involuntary actions like blood pressure, salivation, and vomiting?", hi: "‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§≠‡§æ‡§ó ‡§∞‡§ï‡•ç‡§§‡§¶‡§æ‡§¨, ‡§≤‡§æ‡§∞ ‡§Ü‡§®‡§æ ‡§§‡§•‡§æ ‡§µ‡§Æ‡§® ‡§ú‡•à‡§∏‡•Ä ‡§Ö‡§®‡•à‡§ö‡•ç‡§õ‡§ø‡§ï ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Cerebrum", "Cerebellum", "Medulla", "Hypothalamus"], hi: ["‡§™‡•ç‡§∞‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï", "‡§Ö‡§®‡•Å‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï", "‡§Æ‡•á‡§°‡•Å‡§≤‡§æ", "‡§π‡§æ‡§á‡§™‡•ã‡§•‡•à‡§≤‡•á‡§Æ‡§∏"] }, a: 2 },
            { q: { en: "Which plant hormone causes the wilting of leaves?", hi: "‡§ï‡•å‡§® ‡§∏‡§æ ‡§™‡§æ‡§¶‡§™ ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§® ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§Æ‡•Å‡§∞‡§ù‡§æ‡§®‡•á ‡§ï‡§æ ‡§ï‡§æ‡§∞‡§£ ‡§¨‡§®‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Auxin", "Gibberellin", "Cytokinin", "Abscisic acid"], hi: ["‡§ë‡§ï‡•ç‡§∏‡§ø‡§®", "‡§ú‡§ø‡§¨‡§∞‡•á‡§≤‡§ø‡§®", "‡§∏‡§æ‡§á‡§ü‡•ã‡§ï‡§ø‡§®‡§ø‡§®", "‡§è‡§¨‡•ç‡§∏‡§ø‡§∏‡§ø‡§ï ‡§Ö‡§Æ‡•ç‡§≤"] }, a: 3 },
            { q: { en: "The master gland of the human body is:", hi: "‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•Ä ‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§ó‡•ç‡§∞‡§Ç‡§•‡§ø ‡§π‡•à:" }, o: { en: ["Thyroid gland", "Pituitary gland", "Adrenal gland", "Pancreas"], hi: ["‡§•‡§æ‡§Ø‡§∞‡•â‡§á‡§° ‡§ó‡•ç‡§∞‡§Ç‡§•‡§ø", "‡§™‡•Ä‡§Ø‡•Ç‡§∑ ‡§ó‡•ç‡§∞‡§Ç‡§•‡§ø", "‡§Ö‡§ß‡§ø‡§µ‡•É‡§ï‡•ç‡§ï ‡§ó‡•ç‡§∞‡§Ç‡§•‡§ø", "‡§Ö‡§ó‡•ç‡§®‡•ç‡§Ø‡§æ‡§∂‡§Ø"] }, a: 1 },
            { q: { en: "The structural and functional unit of the nervous system is:", hi: "‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§∏‡§Ç‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ï ‡§á‡§ï‡§æ‡§à ‡§π‡•à:" }, o: { en: ["Nephron", "Neuron", "Cerebrum", "Brain"], hi: ["‡§®‡•á‡§´‡•ç‡§∞‡•â‡§®", "‡§®‡•ç‡§Ø‡•Ç‡§∞‡•â‡§®", "‡§™‡•ç‡§∞‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï", "‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï"] }, a: 1 },
            { q: { en: "Which hormone is secreted by the pancreas?", hi: "‡§Ö‡§ó‡•ç‡§®‡•ç‡§Ø‡§æ‡§∂‡§Ø ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§® ‡§∏‡•ç‡§∞‡§æ‡§µ‡§ø‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Glucagon", "Insulin", "Both A and B", "None of these"], hi: ["‡§ó‡•ç‡§≤‡•Ç‡§ï‡§æ‡§ó‡§®", "‡§á‡§Ç‡§∏‡•Å‡§≤‡§ø‡§®", "A ‡§î‡§∞ B ‡§¶‡•ã‡§®‡•ã‡§Ç", "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"] }, a: 2 },
            { q: { en: "The movement of a sunflower towards the sun is known as:", hi: "‡§∏‡•Ç‡§∞‡§ú‡§Æ‡•Å‡§ñ‡•Ä ‡§ï‡§æ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•Ä ‡§ì‡§∞ ‡§ó‡§§‡§ø ‡§ï‡§∞‡§®‡§æ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à:" }, o: { en: ["Geotropism", "Phototropism", "Chemotropism", "Hydrotropism"], hi: ["‡§ó‡•Å‡§∞‡•Å‡§§‡•ç‡§µ‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®", "‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®", "‡§∞‡§∏‡§æ‡§Ø‡§®‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®", "‡§ú‡§≤‡§æ‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§®"] }, a: 1 },
            { q: { en: "Which hormone is known as the 'emergency hormone'?", hi: "'‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§®' ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§® ‡§ï‡•ã ‡§ú‡§æ‡§®‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?" }, o: { en: ["Thyroxine", "Insulin", "Adrenaline", "Growth hormone"], hi: ["‡§•‡§æ‡§Ø‡§∞‡•ã‡§ï‡•ç‡§∏‡§ø‡§®", "‡§á‡§Ç‡§∏‡•Å‡§≤‡§ø‡§®", "‡§è‡§°‡•ç‡§∞‡•á‡§®‡§æ‡§≤‡§æ‡§à‡§®", "‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§π‡§æ‡§∞‡•ç‡§Æ‡•ã‡§®"] }, a: 2 },
            { q: { en: "A reflex arc is formed by:", hi: "‡§è‡§ï ‡§™‡•ç‡§∞‡§§‡§ø‡§µ‡§∞‡•ç‡§§‡•Ä ‡§ö‡§æ‡§™ ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§π‡•ã‡§§‡§æ ‡§π‡•à:" }, o: { en: ["Receptors, brain, muscles", "Receptors, spinal cord, muscles", "Muscles, spinal cord, brain", "Brain, spinal cord, muscles"], hi: ["‡§ó‡•ç‡§∞‡§æ‡§π‡•Ä, ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï, ‡§Æ‡§æ‡§Ç‡§∏‡§™‡•á‡§∂‡§ø‡§Ø‡§æ‡§Ç", "‡§ó‡•ç‡§∞‡§æ‡§π‡•Ä, ‡§Æ‡•á‡§∞‡•Å‡§∞‡§ú‡•ç‡§ú‡•Å, ‡§Æ‡§æ‡§Ç‡§∏‡§™‡•á‡§∂‡§ø‡§Ø‡§æ‡§Ç", "‡§Æ‡§æ‡§Ç‡§∏‡§™‡•á‡§∂‡§ø‡§Ø‡§æ‡§Ç, ‡§Æ‡•á‡§∞‡•Å‡§∞‡§ú‡•ç‡§ú‡•Å, ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï", "‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï, ‡§Æ‡•á‡§∞‡•Å‡§∞‡§ú‡•ç‡§ú‡•Å, ‡§Æ‡§æ‡§Ç‡§∏‡§™‡•á‡§∂‡§ø‡§Ø‡§æ‡§Ç"] }, a: 1 },
            { q: { en: "The part of the neuron where information is acquired is:", hi: "‡§®‡•ç‡§Ø‡•Ç‡§∞‡•â‡§® ‡§ï‡§æ ‡§µ‡§π ‡§≠‡§æ‡§ó ‡§ú‡§π‡§æ‡§Å ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à, ‡§µ‡§π ‡§π‡•à:" }, o: { en: ["Dendrite", "Axon", "Nerve ending", "Cell body"], hi: ["‡§°‡•á‡§Ç‡§°‡•ç‡§∞‡§æ‡§á‡§ü", "‡§è‡§ï‡•ç‡§∏‡•â‡§®", "‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§∏‡§ø‡§∞‡§æ", "‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§ï‡§æ‡§Ø"] }, a: 0 }
        ];

        // --- APPLICATION STATE ---
        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let quizLang = 'en';
        let userName = '';
        let timerInterval;
        let secondsElapsed = 0;

        // --- DOM ELEMENTS ---
        const langScreen = document.getElementById('language-screen');
        const nameScreen = document.getElementById('name-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');

        const namePrompt = document.getElementById('name-prompt');
        const nameInput = document.getElementById('name-input');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressText = document.getElementById('progress-text');
        const timerEl = document.getElementById('timer');
        const submitBtn = document.getElementById('submit-btn');

        // --- UI TEXTS ---
        const uiTexts = {
            en: {
                namePrompt: "Enter your name",
                namePlaceholder: "e.g., John Doe",
                startQuiz: "Start Quiz",
                submit: "Submit Quiz",
                resultTitle: "Quiz Result for",
                scoreLabel: "Score",
                timeLabel: "Time Taken",
                accuracyLabel: "Accuracy",
                reviewTitle: "Question Review",
                telegramSending: "Sending report to Telegram...",
                telegramSuccess: "‚úÖ Report sent successfully!",
                telegramError: "‚ùå Failed to send report. Please check console.",
                questionProgress: (current, total) => `Question ${current} of ${total}`
            },
            hi: {
                namePrompt: "‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
                namePlaceholder: "‡§â‡§¶‡§æ., ‡§∞‡§æ‡§π‡•Å‡§≤ ‡§ï‡•Å‡§Æ‡§æ‡§∞",
                startQuiz: "‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç",
                submit: "‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç",
                resultTitle: "‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ",
                scoreLabel: "‡§∏‡•ç‡§ï‡•ã‡§∞",
                timeLabel: "‡§≤‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§∏‡§Æ‡§Ø",
                accuracyLabel: "‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ",
                reviewTitle: "‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ",
                telegramSending: "‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§∞ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§≠‡•á‡§ú‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...",
                telegramSuccess: "‚úÖ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§≠‡•á‡§ú ‡§¶‡•Ä ‡§ó‡§à!",
                telegramError: "‚ùå ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡§Ç‡§∏‡•ã‡§≤ ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§",
                questionProgress: (current, total) => `‡§™‡•ç‡§∞‡§∂‡•ç‡§® ${current} / ${total}`
            }
        };

        // --- FUNCTIONS ---

        function selectLanguage(lang) {
            quizLang = lang;
            langScreen.classList.add('hidden');
            nameScreen.classList.remove('hidden');
            namePrompt.textContent = uiTexts[lang].namePrompt;
            nameInput.placeholder = uiTexts[lang].namePlaceholder;
            startQuizBtn.textContent = uiTexts[lang].startQuiz;
        }

        function startQuiz() {
            userName = nameInput.value.trim();
            if (userName === "") {
                nameInput.classList.add('border-red-500');
                return;
            }
            sessionStorage.setItem('quizUserName', userName);
            sessionStorage.setItem('quizLang', quizLang);
            nameScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            submitBtn.textContent = uiTexts[quizLang].submit;
            loadQuestion();
            startTimer();
            // Prevent user from leaving the page
            window.addEventListener('beforeunload', beforeUnloadHandler);
        }

        function startTimer() {
            const startTime = Date.now() - (secondsElapsed * 1000);
            timerInterval = setInterval(() => {
                secondsElapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
                const seconds = (secondsElapsed % 60).toString().padStart(2, '0');
                timerEl.textContent = `${minutes}:${seconds}`;
            }, 1000);
        }

        function loadQuestion() {
            // Save progress to session storage
            sessionStorage.setItem('quizAnswers', JSON.stringify(userAnswers));
            sessionStorage.setItem('quizCurrentQuestion', currentQuestionIndex);

            const questionData = quizData[currentQuestionIndex];
            progressText.textContent = uiTexts[quizLang].questionProgress(currentQuestionIndex + 1, quizData.length);
            questionText.textContent = questionData.q[quizLang];
            optionsContainer.innerHTML = '';

            questionData.o[quizLang].forEach((option, index) => {
                const optionElement = document.createElement('button');
                optionElement.className = 'quiz-option text-left w-full bg-gray-700 p-4 rounded-lg border-2 border-transparent hover:border-cyan-500';
                optionElement.innerHTML = `<span class="font-bold mr-3">${String.fromCharCode(65 + index)}.</span> ${option}`;
                if (userAnswers[currentQuestionIndex] === index) {
                    optionElement.classList.add('selected');
                }
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });

            // Change button to "Submit" on the last question
            if (currentQuestionIndex === quizData.length - 1) {
                // This logic is now handled by the single submit button at the end
            }
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            // Go to next question automatically
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                // On the last question, just highlight the choice
                loadQuestion(); 
            }
        }

        function submitQuiz() {
            clearInterval(timerInterval);
            window.removeEventListener('beforeunload', beforeUnloadHandler);
            sessionStorage.clear(); // Clear storage after successful submission

            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');

            displayResults();
            sendTelegramReport();
        }

        function displayResults() {
            let score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === quizData[index].a) {
                    score++;
                }
            });

            const totalQuestions = quizData.length;
            const accuracy = ((score / totalQuestions) * 100).toFixed(1);
            const minutes = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
            const seconds = (secondsElapsed % 60).toString().padStart(2, '0');

            document.getElementById('result-title').textContent = `${uiTexts[quizLang].resultTitle} ${userName}`;
            document.getElementById('score-label').textContent = uiTexts[quizLang].scoreLabel;
            document.getElementById('time-label').textContent = uiTexts[quizLang].timeLabel;
            document.getElementById('accuracy-label').textContent = uiTexts[quizLang].accuracyLabel;
            document.getElementById('review-title').textContent = uiTexts[quizLang].reviewTitle;

            document.getElementById('score').textContent = `${score} / ${totalQuestions}`;
            document.getElementById('time-taken').textContent = `${minutes}:${seconds}`;
            document.getElementById('accuracy').textContent = `${accuracy}%`;

            const reviewContainer = document.getElementById('review-container');
            reviewContainer.innerHTML = '';
            quizData.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const correctAnswer = question.a;
                const isCorrect = userAnswer === correctAnswer;

                let resultColor = isCorrect ? 'border-green-500' : 'border-red-500';
                if (userAnswer === null) resultColor = 'border-gray-500';

                let reviewHTML = `<div class="bg-gray-900 p-4 rounded-lg border-l-4 ${resultColor}">`;
                reviewHTML += `<p class="font-bold text-white mb-3">${index + 1}. ${question.q[quizLang]}</p>`;
                
                question.o[quizLang].forEach((option, optionIndex) => {
                    let optionClass = 'text-gray-300';
                    let indicator = '';
                    if (optionIndex === correctAnswer) {
                        optionClass = 'text-green-400 font-bold';
                        indicator = ' (Correct)';
                    }
                    if (optionIndex === userAnswer && userAnswer !== correctAnswer) {
                        optionClass = 'text-red-400 font-bold';
                        indicator = ' (Your Answer)';
                    }
                    reviewHTML += `<p class="ml-4 ${optionClass}">${String.fromCharCode(65 + optionIndex)}. ${option}${indicator}</p>`;
                });

                if (userAnswer === null) {
                    reviewHTML += `<p class="ml-4 mt-2 text-yellow-400 font-bold">Not Answered</p>`;
                }
                
                reviewHTML += `</div>`;
                reviewContainer.innerHTML += reviewHTML;
            });
        }

        async function sendTelegramReport() {
            const telegramStatus = document.getElementById('telegram-status');
            telegramStatus.textContent = uiTexts[quizLang].telegramSending;
            telegramStatus.classList.add('text-yellow-400');

            const botToken = '7515435403:AAFZy4lBut4oWZ1L9JYHtsqskaZzv_q97K0';
            const channelId = '-1002833692420';

            // --- Format Report ---
            let score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === quizData[index].a) score++;
            });
            const totalQuestions = quizData.length;
            const accuracy = ((score / totalQuestions) * 100).toFixed(1);
            const minutes = Math.floor(secondsElapsed / 60);
            const seconds = secondsElapsed % 60;
            
            let report = `*üîî New Quiz Submission!* üîî\n\n`;
            report += `*üßë‚Äçüéì Name:* ${userName}\n`;
            report += `*üìä Score:* ${score} / ${totalQuestions}\n`;
            report += `*üéØ Accuracy:* ${accuracy}%\n`;
            report += `*‚è±Ô∏è Time Taken:* ${minutes}m ${seconds}s\n\n`;
            report += `*üìù Detailed Review:*\n`;
            report += `------------------------------------\n`;

            quizData.forEach((q, index) => {
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = q.a;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                const statusIcon = isCorrect ? '‚úÖ' : '‚ùå';
                
                report += `*Q${index + 1}:* ${q.q.en}\n`;
                
                if (userAnswerIndex !== null) {
                    report += `*Your Answer:* ${q.o.en[userAnswerIndex]}\n`;
                } else {
                    report += `*Your Answer:* Not Answered\n`;
                }
                
                if (!isCorrect) {
                     report += `*Correct Answer:* ${q.o.en[correctAnswerIndex]}\n`;
                }
                report += `${statusIcon}\n\n`;
            });
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        chat_id: channelId, 
                        text: report,
                        parse_mode: 'Markdown'
                    })
                });
                const result = await response.json();
                if (result.ok) {
                    telegramStatus.textContent = uiTexts[quizLang].telegramSuccess;
                    telegramStatus.classList.remove('text-yellow-400');
                    telegramStatus.classList.add('text-green-400');
                } else {
                    throw new Error(result.description);
                }
            } catch (error) {
                console.error("Telegram API Error:", error);
                telegramStatus.textContent = uiTexts[quizLang].telegramError;
                telegramStatus.classList.remove('text-yellow-400');
                telegramStatus.classList.add('text-red-400');
            }
        }

        function beforeUnloadHandler(e) {
            e.preventDefault();
            e.returnValue = ''; // Required for Chrome
        }

        // --- Check for saved state on page load ---
        window.onload = () => {
            const savedName = sessionStorage.getItem('quizUserName');
            const savedLang = sessionStorage.getItem('quizLang');
            const savedAnswers = sessionStorage.getItem('quizAnswers');
            const savedQuestionIndex = sessionStorage.getItem('quizCurrentQuestion');

            if (savedName && savedLang && savedAnswers && savedQuestionIndex) {
                // Restore state
                userName = savedName;
                quizLang = savedLang;
                userAnswers = JSON.parse(savedAnswers);
                currentQuestionIndex = parseInt(savedQuestionIndex, 10);
                
                // Jump directly to the quiz
                langScreen.classList.add('hidden');
                nameScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                submitBtn.textContent = uiTexts[quizLang].submit;
                loadQuestion();
                startTimer();
                window.addEventListener('beforeunload', beforeUnloadHandler);
            }
        };

    </script>
</body>
</html>

