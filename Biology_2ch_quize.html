<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biology Quiz - Class 10</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.15);
        }
        .quiz-option.selected {
            background-color: #0891b2; /* Cyan 600 */
            border-color: #06b6d4; /* Cyan 500 */
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.2);
        }
        .btn-primary {
            transition: all 0.2s ease-in-out;
        }
        .btn-primary:hover {
            transform: scale(1.05);
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #confirmation-modal {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 flex items-center justify-center min-h-screen p-4">

    <div id="main-container" class="w-full max-w-4xl mx-auto">

        <!-- Language Selection Screen -->
        <div id="language-screen" class="text-center">
            <h1 class="text-4xl lg:text-5xl font-extrabold text-white mb-8">Choose your language</h1>
            <div class="flex flex-col sm:flex-row justify-center gap-6">
                <button onclick="selectLanguage('en')" class="btn-primary bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-8 rounded-xl text-2xl shadow-lg">English ðŸ‡¬ðŸ‡§</button>
                <button onclick="selectLanguage('hi')" class="btn-primary bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 px-8 rounded-xl text-2xl shadow-lg">Hindi ðŸ‡®ðŸ‡³</button>
            </div>
        </div>

        <!-- Name Input Screen -->
        <div id="name-screen" class="hidden text-center">
            <h1 id="name-prompt" class="text-4xl lg:text-5xl font-extrabold text-white mb-6"></h1>
            <input type="text" id="name-input" class="text-center bg-gray-800 border-2 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500 text-white text-2xl rounded-lg p-3 w-full max-w-md mx-auto shadow-inner" placeholder="">
            <button id="start-quiz-btn" onclick="startQuiz()" class="btn-primary mt-6 bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-10 rounded-xl text-xl shadow-lg"></button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden bg-gray-800 p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700">
            <div class="flex justify-between items-center mb-6">
                <div id="progress-text" class="text-lg font-bold text-cyan-400"></div>
                <div id="timer" class="text-xl font-bold bg-gray-900 px-4 py-2 rounded-lg text-white shadow-md">00:00</div>
            </div>
            <div id="question-container" class="mb-6">
                <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-white mb-6 min-h-[100px]"></h2>
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Options will be injected here -->
                </div>
            </div>
            <div class="flex justify-end mt-8">
                <button id="submit-btn" onclick="showConfirmationModal()" class="btn-primary bg-red-600 hover:bg-red-500 text-white font-bold py-3 px-12 rounded-lg text-lg shadow-lg"></button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden bg-gray-800 p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700">
            <h1 id="result-title" class="text-4xl font-extrabold text-center text-white mb-6"></h1>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-8">
                <div class="bg-gray-900 p-4 rounded-lg flex flex-col items-center justify-center">
                    <p id="score-label" class="text-gray-400 text-sm font-bold uppercase"></p>
                    <p id="score" class="text-4xl font-bold text-green-400 mt-1"></p>
                </div>
                <div class="bg-gray-900 p-4 rounded-lg flex flex-col items-center justify-center">
                    <p id="time-label" class="text-gray-400 text-sm font-bold uppercase"></p>
                    <p id="time-taken" class="text-4xl font-bold text-cyan-400 mt-1"></p>
                </div>
                <div class="bg-gray-900 p-4 rounded-lg flex flex-col items-center justify-center">
                    <p id="accuracy-label" class="text-gray-400 text-sm font-bold uppercase"></p>
                    <p id="accuracy" class="text-4xl font-bold text-yellow-400 mt-1"></p>
                </div>
            </div>
            <div id="telegram-status" class="text-center my-4 font-semibold"></div>
            <h2 id="review-title" class="text-2xl font-bold text-center text-white mt-8 mb-4"></h2>
            <div id="review-container" class="space-y-4 max-h-[40vh] overflow-y-auto no-scrollbar pr-2">
                <!-- Review content will be injected here -->
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-gray-800 rounded-xl shadow-2xl p-8 w-full max-w-md text-center border border-gray-600">
            <h2 id="modal-title" class="text-2xl font-bold text-white mb-4"></h2>
            <p id="modal-text" class="text-gray-300 mb-8"></p>
            <div class="flex justify-center gap-4">
                <button id="modal-cancel-btn" onclick="hideConfirmationModal()" class="btn-primary bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-lg"></button>
                <button id="modal-confirm-btn" onclick="finalizeQuiz()" class="btn-primary bg-red-600 hover:bg-red-500 text-white font-bold py-3 px-8 rounded-lg"></button>
            </div>
        </div>
    </div>

    <script>
        // --- QUIZ DATA (SAME AS BEFORE) ---
        const quizData = [
            // Life Processes
            { q: { en: "In which part of the alimentary canal is food completely digested?", hi: "à¤†à¤¹à¤¾à¤°à¤¨à¤¾à¤² à¤•à¥‡ à¤•à¤¿à¤¸ à¤­à¤¾à¤— à¤®à¥‡à¤‚ à¤­à¥‹à¤œà¤¨ à¤•à¤¾ à¤ªà¥‚à¤°à¥à¤£ à¤ªà¤¾à¤šà¤¨ à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Stomach", "Small intestine", "Large intestine", "Rectum"], hi: ["à¤†à¤®à¤¾à¤¶à¤¯", "à¤›à¥‹à¤Ÿà¥€ à¤†à¤‚à¤¤", "à¤¬à¤¡à¤¼à¥€ à¤†à¤‚à¤¤", "à¤®à¤²à¤¾à¤¶à¤¯"] }, a: 1 },
            { q: { en: "Which of the following is responsible for the green color of plants?", hi: "à¤ªà¥Œà¤§à¥‹à¤‚ à¤•à¥‡ à¤¹à¤°à¥‡ à¤°à¤‚à¤— à¤•à¥‡ à¤²à¤¿à¤ à¤¨à¤¿à¤®à¥à¤¨à¤²à¤¿à¤–à¤¿à¤¤ à¤®à¥‡à¤‚ à¤¸à¥‡ à¤•à¥Œà¤¨ à¤œà¤¿à¤®à¥à¤®à¥‡à¤¦à¤¾à¤° à¤¹à¥ˆ?" }, o: { en: ["Leucoplast", "Chlorophyll", "Chromoplast", "None of these"], hi: ["à¤²à¥à¤¯à¥‚à¤•à¥‹à¤ªà¥à¤²à¤¾à¤¸à¥à¤Ÿ", "à¤•à¥à¤²à¥‹à¤°à¥‹à¤«à¤¿à¤²", "à¤•à¥à¤°à¥‹à¤®à¥‹à¤ªà¥à¤²à¤¾à¤¸à¥à¤Ÿ", "à¤‡à¤¨à¤®à¥‡à¤‚ à¤¸à¥‡ à¤•à¥‹à¤ˆ à¤¨à¤¹à¥€à¤‚"] }, a: 1 },
            { q: { en: "The breakdown of pyruvate to give carbon dioxide, water, and energy takes place in:", hi: "à¤ªà¤¾à¤‡à¤°à¥à¤µà¥‡à¤Ÿ à¤•à¤¾ à¤µà¤¿à¤–à¤‚à¤¡à¤¨ à¤¹à¥‹à¤•à¤° à¤•à¤¾à¤°à¥à¤¬à¤¨ à¤¡à¤¾à¤‡à¤‘à¤•à¥à¤¸à¤¾à¤‡à¤¡, à¤œà¤² à¤¤à¤¥à¤¾ à¤Šà¤°à¥à¤œà¤¾ à¤¦à¥‡à¤¨à¤¾, à¤¯à¤¹ à¤•à¥à¤°à¤¿à¤¯à¤¾ à¤¹à¥‹à¤¤à¥€ à¤¹à¥ˆ:" }, o: { en: ["Cytoplasm", "Mitochondria", "Chloroplast", "Nucleus"], hi: ["à¤•à¥‹à¤¶à¤¿à¤•à¤¾à¤¦à¥à¤°à¤µà¥à¤¯ à¤®à¥‡à¤‚", "à¤®à¤¾à¤‡à¤Ÿà¥‹à¤•à¥‰à¤¨à¥à¤¡à¥à¤°à¤¿à¤¯à¤¾ à¤®à¥‡à¤‚", "à¤¹à¤°à¤¿à¤¤à¤²à¤µà¤• à¤®à¥‡à¤‚", "à¤•à¥‡à¤‚à¤¦à¥à¤°à¤• à¤®à¥‡à¤‚"] }, a: 1 },
            { q: { en: "Which of these is the main site for the exchange of gases in the lungs?", hi: "à¤«à¥‡à¤«à¤¡à¤¼à¥‹à¤‚ à¤®à¥‡à¤‚ à¤—à¥ˆà¤¸à¥‹à¤‚ à¤•à¥‡ à¤†à¤¦à¤¾à¤¨-à¤ªà¥à¤°à¤¦à¤¾à¤¨ à¤•à¤¾ à¤®à¥à¤–à¥à¤¯ à¤¸à¥à¤¥à¤² à¤•à¥Œà¤¨ à¤¸à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Trachea", "Bronchi", "Alveoli", "Diaphragm"], hi: ["à¤¶à¥à¤µà¤¾à¤¸à¤¨à¤²à¥€", "à¤¬à¥à¤°à¥‹à¤¨à¥à¤•à¤¾à¤ˆ", "à¤µà¤¾à¤¯à¥à¤•à¥‹à¤·à¥à¤ à¤¿à¤•à¤¾ (à¤à¤²à¥à¤µà¤¿à¤¯à¥‹à¤²à¥€)", "à¤¡à¤¾à¤¯à¤¾à¤«à¥à¤°à¤¾à¤®"] }, a: 2 },
            { q: { en: "The autotrophic mode of nutrition requires:", hi: "à¤¸à¥à¤µà¤ªà¥‹à¤·à¥€ à¤ªà¥‹à¤·à¤£ à¤•à¥‡ à¤²à¤¿à¤ à¤†à¤µà¤¶à¥à¤¯à¤• à¤¹à¥ˆ:" }, o: { en: ["Carbon dioxide and water", "Chlorophyll", "Sunlight", "All of the above"], hi: ["à¤•à¤¾à¤°à¥à¤¬à¤¨ à¤¡à¤¾à¤‡à¤‘à¤•à¥à¤¸à¤¾à¤‡à¤¡ à¤¤à¤¥à¤¾ à¤œà¤²", "à¤•à¥à¤²à¥‹à¤°à¥‹à¤«à¤¿à¤²", "à¤¸à¥‚à¤°à¥à¤¯ à¤•à¤¾ à¤ªà¥à¤°à¤•à¤¾à¤¶", "à¤‰à¤ªà¤°à¥‹à¤•à¥à¤¤ à¤¸à¤­à¥€"] }, a: 3 },
            { q: { en: "The function of xylem in plants is:", hi: "à¤ªà¥Œà¤§à¥‹à¤‚ à¤®à¥‡à¤‚ à¤œà¤¾à¤‡à¤²à¤® à¤•à¤¾ à¤•à¤¾à¤°à¥à¤¯ à¤¹à¥ˆ:" }, o: { en: ["Transport of water", "Transport of food", "Transport of amino acids", "Transport of oxygen"], hi: ["à¤œà¤² à¤•à¤¾ à¤µà¤¹à¤¨", "à¤­à¥‹à¤œà¤¨ à¤•à¤¾ à¤µà¤¹à¤¨", "à¤…à¤®à¥€à¤¨à¥‹ à¤…à¤®à¥à¤² à¤•à¤¾ à¤µà¤¹à¤¨", "à¤‘à¤•à¥à¤¸à¥€à¤œà¤¨ à¤•à¤¾ à¤µà¤¹à¤¨"] }, a: 0 },
            { q: { en: "The filtration units of the kidneys are called:", hi: "à¤µà¥ƒà¤•à¥à¤• à¤•à¥€ à¤°à¤šà¤¨à¤¾à¤¤à¥à¤®à¤• à¤à¤µà¤‚ à¤•à¥à¤°à¤¿à¤¯à¤¾à¤¤à¥à¤®à¤• à¤‡à¤•à¤¾à¤ˆ à¤•à¥‹ à¤•à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚:" }, o: { en: ["Ureter", "Urethra", "Neuron", "Nephron"], hi: ["à¤®à¥‚à¤¤à¥à¤°à¤µà¤¾à¤¹à¤¿à¤¨à¥€", "à¤®à¥‚à¤¤à¥à¤°à¤®à¤¾à¤°à¥à¤—", "à¤¨à¥à¤¯à¥‚à¤°à¥‰à¤¨", "à¤¨à¥‡à¤«à¥à¤°à¥‰à¤¨"] }, a: 3 },
            { q: { en: "Which enzyme is found in saliva?", hi: "à¤²à¤¾à¤° à¤®à¥‡à¤‚ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤à¤‚à¤œà¤¾à¤‡à¤® à¤ªà¤¾à¤¯à¤¾ à¤œà¤¾à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Pepsin", "Trypsin", "Amylase (Ptyalin)", "Lipase"], hi: ["à¤ªà¥‡à¤ªà¥à¤¸à¤¿à¤¨", "à¤Ÿà¥à¤°à¤¿à¤ªà¥à¤¸à¤¿à¤¨", "à¤à¤®à¤¾à¤‡à¤²à¥‡à¤œ (à¤Ÿà¤¾à¤¯à¤²à¤¿à¤¨)", "à¤²à¤¾à¤‡à¤ªà¥‡à¤œ"] }, a: 2 },
            { q: { en: "The opening and closing of the stomatal pore is a function of:", hi: "à¤°à¤‚à¤§à¥à¤°à¥‹à¤‚ à¤•à¤¾ à¤–à¥à¤²à¤¨à¤¾ à¤”à¤° à¤¬à¤‚à¤¦ à¤¹à¥‹à¤¨à¤¾ à¤¨à¤¿à¤°à¥à¤­à¤° à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ:" }, o: { en: ["Epidermal cells", "Guard cells", "Companion cells", "Sieve tubes"], hi: ["à¤à¤ªà¤¿à¤¡à¤°à¥à¤®à¤² à¤•à¥‹à¤¶à¤¿à¤•à¤¾à¤“à¤‚ à¤ªà¤°", "à¤¦à¥à¤µà¤¾à¤° à¤•à¥‹à¤¶à¤¿à¤•à¤¾à¤“à¤‚ à¤ªà¤°", "à¤¸à¤¹à¤šà¤° à¤•à¥‹à¤¶à¤¿à¤•à¤¾à¤“à¤‚ à¤ªà¤°", "à¤šà¤¾à¤²à¤¨à¥€ à¤¨à¤²à¤¿à¤•à¤¾à¤“à¤‚ à¤ªà¤°"] }, a: 1 },
            { q: { en: "Which component of blood is responsible for blood clotting?", hi: "à¤°à¤•à¥à¤¤ à¤•à¤¾ à¤¥à¤•à¥à¤•à¤¾ à¤¬à¤¨à¤¾à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤…à¤µà¤¯à¤µ à¤¸à¤¹à¤¾à¤¯à¤• à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Red Blood Cells (RBC)", "White Blood Cells (WBC)", "Plasma", "Platelets"], hi: ["à¤²à¤¾à¤² à¤°à¤•à¥à¤¤ à¤•à¥‹à¤¶à¤¿à¤•à¤¾à¤à¤‚ (RBC)", "à¤¶à¥à¤µà¥‡à¤¤ à¤°à¤•à¥à¤¤ à¤•à¥‹à¤¶à¤¿à¤•à¤¾à¤à¤‚ (WBC)", "à¤ªà¥à¤²à¤¾à¤œà¥à¤®à¤¾", "à¤ªà¥à¤²à¥‡à¤Ÿà¤²à¥‡à¤Ÿà¥à¤¸"] }, a: 3 },
            { q: { en: "Which of the following is a plant hormone?", hi: "à¤¨à¤¿à¤®à¥à¤¨à¤²à¤¿à¤–à¤¿à¤¤ à¤®à¥‡à¤‚ à¤¸à¥‡ à¤•à¥Œà¤¨ à¤à¤• à¤ªà¤¾à¤¦à¤ª à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨ à¤¹à¥ˆ?" }, o: { en: ["Insulin", "Thyroxine", "Estrogen", "Cytokinin"], hi: ["à¤‡à¤‚à¤¸à¥à¤²à¤¿à¤¨", "à¤¥à¤¾à¤¯à¤°à¥‹à¤•à¥à¤¸à¤¿à¤¨", "à¤à¤¸à¥à¤Ÿà¥à¤°à¥‹à¤œà¤¨", "à¤¸à¤¾à¤‡à¤Ÿà¥‹à¤•à¤¿à¤¨à¤¿à¤¨"] }, a: 3 },
            { q: { en: "The heart of a fish has how many chambers?", hi: "à¤®à¤›à¤²à¥€ à¤•à¥‡ à¤¹à¥ƒà¤¦à¤¯ à¤®à¥‡à¤‚ à¤•à¥‹à¤·à¥à¤ à¥‹à¤‚ à¤•à¥€ à¤¸à¤‚à¤–à¥à¤¯à¤¾ à¤•à¤¿à¤¤à¤¨à¥€ à¤¹à¥‹à¤¤à¥€ à¤¹à¥ˆ?" }, o: { en: ["One", "Two", "Three", "Four"], hi: ["à¤à¤•", "à¤¦à¥‹", "à¤¤à¥€à¤¨", "à¤šà¤¾à¤°"] }, a: 1 },
            { q: { en: "In which form is most of the waste product excreted by plants?", hi: "à¤ªà¥Œà¤§à¥‡ à¤…à¤§à¤¿à¤•à¤¾à¤‚à¤¶ à¤…à¤ªà¤¶à¤¿à¤·à¥à¤Ÿ à¤‰à¤¤à¥à¤ªà¤¾à¤¦à¥‹à¤‚ à¤•à¥‹ à¤•à¤¿à¤¸ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ à¤‰à¤¤à¥à¤¸à¤°à¥à¤œà¤¿à¤¤ à¤•à¤°à¤¤à¥‡ à¤¹à¥ˆà¤‚?" }, o: { en: ["Gums and Resins", "Through transpiration", "By shedding leaves", "All of the above"], hi: ["à¤—à¥‹à¤‚à¤¦ à¤”à¤° à¤°à¥‡à¤œà¤¿à¤¨", "à¤µà¤¾à¤·à¥à¤ªà¥‹à¤¤à¥à¤¸à¤°à¥à¤œà¤¨ à¤¦à¥à¤µà¤¾à¤°à¤¾", "à¤ªà¤¤à¥à¤¤à¤¿à¤¯à¤¾à¤ à¤—à¤¿à¤°à¤¾à¤•à¤°", "à¤‰à¤ªà¤°à¥‹à¤•à¥à¤¤ à¤¸à¤­à¥€"] }, a: 3 },
            { q: { en: "What is the normal blood pressure in humans?", hi: "à¤®à¤¨à¥à¤·à¥à¤¯ à¤®à¥‡à¤‚ à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤°à¤•à¥à¤¤à¤šà¤¾à¤ª à¤•à¤¿à¤¤à¤¨à¤¾ à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["80/120 mm Hg", "120/80 mm Hg", "100/60 mm Hg", "140/90 mm Hg"], hi: ["80/120 mm Hg", "120/80 mm Hg", "100/60 mm Hg", "140/90 mm Hg"] }, a: 1 },
            { q: { en: "The process of digestion starts from:", hi: "à¤ªà¤¾à¤šà¤¨ à¤•à¥€ à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾ à¤•à¤¹à¤¾à¤ à¤¸à¥‡ à¤¶à¥à¤°à¥‚ à¤¹à¥‹à¤¤à¥€ à¤¹à¥ˆ?" }, o: { en: ["Stomach", "Oesophagus", "Mouth", "Small Intestine"], hi: ["à¤†à¤®à¤¾à¤¶à¤¯", "à¤—à¥à¤°à¤¾à¤¸à¤¨à¤²à¥€", "à¤®à¥à¤–", "à¤›à¥‹à¤Ÿà¥€ à¤†à¤‚à¤¤"] }, a: 2 },
            { q: { en: "Which part of the brain is responsible for maintaining posture and balance of the body?", hi: "à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤• à¤•à¤¾ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤­à¤¾à¤— à¤¶à¤°à¥€à¤° à¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤¤à¤¥à¤¾ à¤¸à¤‚à¤¤à¥à¤²à¤¨ à¤•à¤¾ à¤…à¤¨à¥à¤°à¤•à¥à¤·à¤£ à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Cerebrum", "Cerebellum", "Medulla", "Pons"], hi: ["à¤ªà¥à¤°à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•", "à¤…à¤¨à¥à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•", "à¤®à¥‡à¤¡à¥à¤²à¤¾", "à¤ªà¥‹à¤¨à¥à¤¸"] }, a: 1 },
            { q: { en: "The gap between two neurons is called a:", hi: "à¤¦à¥‹ à¤¨à¥à¤¯à¥‚à¤°à¥‰à¤¨à¥‹à¤‚ à¤•à¥‡ à¤®à¤§à¥à¤¯ à¤–à¤¾à¤²à¥€ à¤¸à¥à¤¥à¤¾à¤¨ à¤•à¥‹ à¤•à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚:" }, o: { en: ["Dendrite", "Synapse", "Axon", "Impulse"], hi: ["à¤¡à¥‡à¤‚à¤¡à¥à¤°à¤¾à¤‡à¤Ÿ", "à¤¸à¤¿à¤¨à¥‡à¤ªà¥à¤¸", "à¤à¤•à¥à¤¸à¥‰à¤¨", "à¤†à¤µà¥‡à¤—"] }, a: 1 },
            { q: { en: "Which of the following is not an endocrine gland?", hi: "à¤¨à¤¿à¤®à¥à¤¨à¤²à¤¿à¤–à¤¿à¤¤ à¤®à¥‡à¤‚ à¤¸à¥‡ à¤•à¥Œà¤¨ à¤…à¤‚à¤¤à¤ƒà¤¸à¥à¤°à¤¾à¤µà¥€ à¤—à¥à¤°à¤‚à¤¥à¤¿ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆ?" }, o: { en: ["Pituitary", "Thyroid", "Salivary gland", "Adrenal"], hi: ["à¤ªà¥€à¤¯à¥‚à¤·", "à¤¥à¤¾à¤¯à¤°à¥‰à¤‡à¤¡", "à¤²à¤¾à¤° à¤—à¥à¤°à¤‚à¤¥à¤¿", "à¤…à¤§à¤¿à¤µà¥ƒà¤•à¥à¤•"] }, a: 2 },
            { q: { en: "Which hormone is responsible for the growth of the stem in plants?", hi: "à¤ªà¥Œà¤§à¥‹à¤‚ à¤®à¥‡à¤‚ à¤¤à¤¨à¥‡ à¤•à¥€ à¤µà¥ƒà¤¦à¥à¤§à¤¿ à¤•à¥‡ à¤²à¤¿à¤ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨ à¤œà¤¿à¤®à¥à¤®à¥‡à¤¦à¤¾à¤° à¤¹à¥ˆ?" }, o: { en: ["Auxin", "Gibberellin", "Abscisic acid", "Cytokinin"], hi: ["à¤‘à¤•à¥à¤¸à¤¿à¤¨", "à¤œà¤¿à¤¬à¤°à¥‡à¤²à¤¿à¤¨", "à¤à¤¬à¥à¤¸à¤¿à¤¸à¤¿à¤• à¤…à¤®à¥à¤²", "à¤¸à¤¾à¤‡à¤Ÿà¥‹à¤•à¤¿à¤¨à¤¿à¤¨"] }, a: 0 },
            { q: { en: "The deficiency of which hormone causes goitre?", hi: "à¤•à¤¿à¤¸ à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨ à¤•à¥€ à¤•à¤®à¥€ à¤¸à¥‡ à¤˜à¥‡à¤‚à¤˜à¤¾ à¤°à¥‹à¤— à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Insulin", "Adrenaline", "Thyroxine", "Growth hormone"], hi: ["à¤‡à¤‚à¤¸à¥à¤²à¤¿à¤¨", "à¤à¤¡à¥à¤°à¥‡à¤¨à¤¾à¤²à¤¾à¤ˆà¤¨", "à¤¥à¤¾à¤¯à¤°à¥‹à¤•à¥à¤¸à¤¿à¤¨", "à¤µà¥ƒà¤¦à¥à¤§à¤¿ à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨"] }, a: 2 },
            { q: { en: "The growth of a pollen tube towards the ovule is an example of:", hi: "à¤ªà¤°à¤¾à¤— à¤¨à¤²à¤¿à¤•à¤¾ à¤•à¤¾ à¤¬à¥€à¤œà¤¾à¤‚à¤¡ à¤•à¥€ à¤“à¤° à¤µà¥ƒà¤¦à¥à¤§à¤¿ à¤•à¤°à¤¨à¤¾ à¤•à¤¿à¤¸à¤•à¤¾ à¤‰à¤¦à¤¾à¤¹à¤°à¤£ à¤¹à¥ˆ?" }, o: { en: ["Phototropism", "Geotropism", "Hydrotropism", "Chemotropism"], hi: ["à¤ªà¥à¤°à¤•à¤¾à¤¶à¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨", "à¤—à¥à¤°à¥à¤¤à¥à¤µà¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨", "à¤œà¤²à¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨", "à¤°à¤¸à¤¾à¤¯à¤¨à¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨"] }, a: 3 },
            { q: { en: "Which part of the brain controls involuntary actions like blood pressure, salivation, and vomiting?", hi: "à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤• à¤•à¤¾ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤­à¤¾à¤— à¤°à¤•à¥à¤¤à¤¦à¤¾à¤¬, à¤²à¤¾à¤° à¤†à¤¨à¤¾ à¤¤à¤¥à¤¾ à¤µà¤®à¤¨ à¤œà¥ˆà¤¸à¥€ à¤…à¤¨à¥ˆà¤šà¥à¤›à¤¿à¤• à¤•à¥à¤°à¤¿à¤¯à¤¾à¤“à¤‚ à¤•à¥‹ à¤¨à¤¿à¤¯à¤‚à¤¤à¥à¤°à¤¿à¤¤ à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Cerebrum", "Cerebellum", "Medulla", "Hypothalamus"], hi: ["à¤ªà¥à¤°à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•", "à¤…à¤¨à¥à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•", "à¤®à¥‡à¤¡à¥à¤²à¤¾", "à¤¹à¤¾à¤‡à¤ªà¥‹à¤¥à¥ˆà¤²à¥‡à¤®à¤¸"] }, a: 2 },
            { q: { en: "Which plant hormone causes the wilting of leaves?", hi: "à¤•à¥Œà¤¨ à¤¸à¤¾ à¤ªà¤¾à¤¦à¤ª à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨ à¤ªà¤¤à¥à¤¤à¤¿à¤¯à¥‹à¤‚ à¤•à¥‡ à¤®à¥à¤°à¤à¤¾à¤¨à¥‡ à¤•à¤¾ à¤•à¤¾à¤°à¤£ à¤¬à¤¨à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Auxin", "Gibberellin", "Cytokinin", "Abscisic acid"], hi: ["à¤‘à¤•à¥à¤¸à¤¿à¤¨", "à¤œà¤¿à¤¬à¤°à¥‡à¤²à¤¿à¤¨", "à¤¸à¤¾à¤‡à¤Ÿà¥‹à¤•à¤¿à¤¨à¤¿à¤¨", "à¤à¤¬à¥à¤¸à¤¿à¤¸à¤¿à¤• à¤…à¤®à¥à¤²"] }, a: 3 },
            { q: { en: "The master gland of the human body is:", hi: "à¤®à¤¾à¤¨à¤µ à¤¶à¤°à¥€à¤° à¤•à¥€ à¤®à¤¾à¤¸à¥à¤Ÿà¤° à¤—à¥à¤°à¤‚à¤¥à¤¿ à¤¹à¥ˆ:" }, o: { en: ["Thyroid gland", "Pituitary gland", "Adrenal gland", "Pancreas"], hi: ["à¤¥à¤¾à¤¯à¤°à¥‰à¤‡à¤¡ à¤—à¥à¤°à¤‚à¤¥à¤¿", "à¤ªà¥€à¤¯à¥‚à¤· à¤—à¥à¤°à¤‚à¤¥à¤¿", "à¤…à¤§à¤¿à¤µà¥ƒà¤•à¥à¤• à¤—à¥à¤°à¤‚à¤¥à¤¿", "à¤…à¤—à¥à¤¨à¥à¤¯à¤¾à¤¶à¤¯"] }, a: 1 },
            { q: { en: "The structural and functional unit of the nervous system is:", hi: "à¤¤à¤‚à¤¤à¥à¤°à¤¿à¤•à¤¾ à¤¤à¤‚à¤¤à¥à¤° à¤•à¥€ à¤¸à¤‚à¤°à¤šà¤¨à¤¾à¤¤à¥à¤®à¤• à¤”à¤° à¤•à¤¾à¤°à¥à¤¯à¤¾à¤¤à¥à¤®à¤• à¤‡à¤•à¤¾à¤ˆ à¤¹à¥ˆ:" }, o: { en: ["Nephron", "Neuron", "Cerebrum", "Brain"], hi: ["à¤¨à¥‡à¤«à¥à¤°à¥‰à¤¨", "à¤¨à¥à¤¯à¥‚à¤°à¥‰à¤¨", "à¤ªà¥à¤°à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•", "à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•"] }, a: 1 },
            { q: { en: "Which hormone is secreted by the pancreas?", hi: "à¤…à¤—à¥à¤¨à¥à¤¯à¤¾à¤¶à¤¯ à¤¦à¥à¤µà¤¾à¤°à¤¾ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨ à¤¸à¥à¤°à¤¾à¤µà¤¿à¤¤ à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Glucagon", "Insulin", "Both A and B", "None of these"], hi: ["à¤—à¥à¤²à¥‚à¤•à¤¾à¤—à¤¨", "à¤‡à¤‚à¤¸à¥à¤²à¤¿à¤¨", "A à¤”à¤° B à¤¦à¥‹à¤¨à¥‹à¤‚", "à¤‡à¤¨à¤®à¥‡à¤‚ à¤¸à¥‡ à¤•à¥‹à¤ˆ à¤¨à¤¹à¥€à¤‚"] }, a: 2 },
            { q: { en: "The movement of a sunflower towards the sun is known as:", hi: "à¤¸à¥‚à¤°à¤œà¤®à¥à¤–à¥€ à¤•à¤¾ à¤¸à¥‚à¤°à¥à¤¯ à¤•à¥€ à¤“à¤° à¤—à¤¤à¤¿ à¤•à¤°à¤¨à¤¾ à¤•à¤¹à¤²à¤¾à¤¤à¤¾ à¤¹à¥ˆ:" }, o: { en: ["Geotropism", "Phototropism", "Chemotropism", "Hydrotropism"], hi: ["à¤—à¥à¤°à¥à¤¤à¥à¤µà¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨", "à¤ªà¥à¤°à¤•à¤¾à¤¶à¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨", "à¤°à¤¸à¤¾à¤¯à¤¨à¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨", "à¤œà¤²à¤¾à¤¨à¥à¤µà¤°à¥à¤¤à¤¨"] }, a: 1 },
            { q: { en: "Which hormone is known as the 'emergency hormone'?", hi: "'à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤²à¥€à¤¨ à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨' à¤•à¥‡ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ à¤•à¤¿à¤¸ à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨ à¤•à¥‹ à¤œà¤¾à¤¨à¤¾ à¤œà¤¾à¤¤à¤¾ à¤¹à¥ˆ?" }, o: { en: ["Thyroxine", "Insulin", "Adrenaline", "Growth hormone"], hi: ["à¤¥à¤¾à¤¯à¤°à¥‹à¤•à¥à¤¸à¤¿à¤¨", "à¤‡à¤‚à¤¸à¥à¤²à¤¿à¤¨", "à¤à¤¡à¥à¤°à¥‡à¤¨à¤¾à¤²à¤¾à¤ˆà¤¨", "à¤µà¥ƒà¤¦à¥à¤§à¤¿ à¤¹à¤¾à¤°à¥à¤®à¥‹à¤¨"] }, a: 2 },
            { q: { en: "A reflex arc is formed by:", hi: "à¤à¤• à¤ªà¥à¤°à¤¤à¤¿à¤µà¤°à¥à¤¤à¥€ à¤šà¤¾à¤ª à¤•à¤¾ à¤¨à¤¿à¤°à¥à¤®à¤¾à¤£ à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆ:" }, o: { en: ["Receptors, brain, muscles", "Receptors, spinal cord, muscles", "Muscles, spinal cord, brain", "Brain, spinal cord, muscles"], hi: ["à¤—à¥à¤°à¤¾à¤¹à¥€, à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•, à¤®à¤¾à¤‚à¤¸à¤ªà¥‡à¤¶à¤¿à¤¯à¤¾à¤‚", "à¤—à¥à¤°à¤¾à¤¹à¥€, à¤®à¥‡à¤°à¥à¤°à¤œà¥à¤œà¥, à¤®à¤¾à¤‚à¤¸à¤ªà¥‡à¤¶à¤¿à¤¯à¤¾à¤‚", "à¤®à¤¾à¤‚à¤¸à¤ªà¥‡à¤¶à¤¿à¤¯à¤¾à¤‚, à¤®à¥‡à¤°à¥à¤°à¤œà¥à¤œà¥, à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•", "à¤®à¤¸à¥à¤¤à¤¿à¤·à¥à¤•, à¤®à¥‡à¤°à¥à¤°à¤œà¥à¤œà¥, à¤®à¤¾à¤‚à¤¸à¤ªà¥‡à¤¶à¤¿à¤¯à¤¾à¤‚"] }, a: 1 },
            { q: { en: "The part of the neuron where information is acquired is:", hi: "à¤¨à¥à¤¯à¥‚à¤°à¥‰à¤¨ à¤•à¤¾ à¤µà¤¹ à¤­à¤¾à¤— à¤œà¤¹à¤¾à¤ à¤¸à¥‚à¤šà¤¨à¤¾ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¥€ à¤œà¤¾à¤¤à¥€ à¤¹à¥ˆ, à¤µà¤¹ à¤¹à¥ˆ:" }, o: { en: ["Dendrite", "Axon", "Nerve ending", "Cell body"], hi: ["à¤¡à¥‡à¤‚à¤¡à¥à¤°à¤¾à¤‡à¤Ÿ", "à¤à¤•à¥à¤¸à¥‰à¤¨", "à¤¤à¤‚à¤¤à¥à¤°à¤¿à¤•à¤¾ à¤¸à¤¿à¤°à¤¾", "à¤•à¥‹à¤¶à¤¿à¤•à¤¾ à¤•à¤¾à¤¯"] }, a: 0 }
        ];

        // --- APPLICATION STATE ---
        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let quizLang = 'en';
        let userName = '';
        let timerInterval;
        let secondsElapsed = 0;

        // --- UI TEXTS (EXPANDED FOR MODAL AND TELEGRAM) ---
        const uiTexts = {
            en: {
                namePrompt: "Enter your name", namePlaceholder: "e.g., John Doe", startQuiz: "Start Quiz", submit: "Submit Quiz",
                resultTitle: "Quiz Result for", scoreLabel: "Score", timeLabel: "Time Taken", accuracyLabel: "Accuracy",
                reviewTitle: "Question Review", telegramSending: "Sending report to Telegram...", telegramSuccess: "âœ… Report sent successfully!",
                telegramError: "âŒ Failed to send report. Please check console.",
                questionProgress: (c, t) => `Question ${c} of ${t}`,
                modalTitle: "Confirm Submission", modalText: (c) => `You have ${c} unanswered questions. Are you sure you want to submit?`,
                modalTextAllAnswered: "Are you sure you want to finish and submit the quiz?",
                modalCancel: "Cancel", modalConfirm: "Submit",
                yourAnswer: "Your Answer", correctAnswer: "Correct Answer", notAnswered: "Not Answered"
            },
            hi: {
                namePrompt: "à¤…à¤ªà¤¨à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚", namePlaceholder: "à¤‰à¤¦à¤¾., à¤°à¤¾à¤¹à¥à¤² à¤•à¥à¤®à¤¾à¤°", startQuiz: "à¤•à¥à¤µà¤¿à¤œà¤¼ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚", submit: "à¤•à¥à¤µà¤¿à¤œà¤¼ à¤œà¤®à¤¾ à¤•à¤°à¥‡à¤‚",
                resultTitle: "à¤•à¥à¤µà¤¿à¤œà¤¼ à¤ªà¤°à¤¿à¤£à¤¾à¤®", scoreLabel: "à¤¸à¥à¤•à¥‹à¤°", timeLabel: "à¤²à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¸à¤®à¤¯", accuracyLabel: "à¤¸à¤Ÿà¥€à¤•à¤¤à¤¾",
                reviewTitle: "à¤ªà¥à¤°à¤¶à¥à¤¨à¥‹à¤‚ à¤•à¥€ à¤¸à¤®à¥€à¤•à¥à¤·à¤¾", telegramSending: "à¤Ÿà¥‡à¤²à¥€à¤—à¥à¤°à¤¾à¤® à¤ªà¤° à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤­à¥‡à¤œà¥€ à¤œà¤¾ à¤°à¤¹à¥€ à¤¹à¥ˆ...", telegramSuccess: "âœ… à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤¸à¤«à¤²à¤¤à¤¾à¤ªà¥‚à¤°à¥à¤µà¤• à¤­à¥‡à¤œ à¤¦à¥€ à¤—à¤ˆ!",
                telegramError: "âŒ à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤­à¥‡à¤œà¤¨à¥‡ à¤®à¥‡à¤‚ à¤µà¤¿à¤«à¤²à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤•à¤‚à¤¸à¥‹à¤² à¤œà¤¾à¤‚à¤šà¥‡à¤‚à¥¤",
                questionProgress: (c, t) => `à¤ªà¥à¤°à¤¶à¥à¤¨ ${c} / ${t}`,
                modalTitle: "à¤œà¤®à¤¾ à¤•à¤°à¤¨à¥‡ à¤•à¥€ à¤ªà¥à¤·à¥à¤Ÿà¤¿ à¤•à¤°à¥‡à¤‚", modalText: (c) => `à¤†à¤ªà¤•à¥‡ ${c} à¤ªà¥à¤°à¤¶à¥à¤¨à¥‹à¤‚ à¤•à¥‡ à¤‰à¤¤à¥à¤¤à¤° à¤¨à¤¹à¥€à¤‚ à¤¦à¤¿à¤ à¤—à¤ à¤¹à¥ˆà¤‚à¥¤ à¤•à¥à¤¯à¤¾ à¤†à¤ª à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤°à¥‚à¤ª à¤¸à¥‡ à¤œà¤®à¤¾ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚?`,
                modalTextAllAnswered: "à¤•à¥à¤¯à¤¾ à¤†à¤ª à¤µà¤¾à¤•à¤ˆ à¤•à¥à¤µà¤¿à¤œà¤¼ à¤¸à¤®à¤¾à¤ªà¥à¤¤ à¤•à¤°à¤•à¥‡ à¤œà¤®à¤¾ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚?",
                modalCancel: "à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚", modalConfirm: "à¤œà¤®à¤¾ à¤•à¤°à¥‡à¤‚",
                yourAnswer: "à¤†à¤ªà¤•à¤¾ à¤‰à¤¤à¥à¤¤à¤°", correctAnswer: "à¤¸à¤¹à¥€ à¤‰à¤¤à¥à¤¤à¤°", notAnswered: "à¤‰à¤¤à¥à¤¤à¤° à¤¨à¤¹à¥€à¤‚ à¤¦à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾"
            }
        };

        // --- DOM ELEMENTS ---
        const langScreen = document.getElementById('language-screen');
        const nameScreen = document.getElementById('name-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const confirmationModal = document.getElementById('confirmation-modal');

        // --- FUNCTIONS ---

        function selectLanguage(lang) {
            quizLang = lang;
            langScreen.classList.add('hidden');
            nameScreen.classList.remove('hidden');
            document.getElementById('name-prompt').textContent = uiTexts[lang].namePrompt;
            document.getElementById('name-input').placeholder = uiTexts[lang].namePlaceholder;
            document.getElementById('start-quiz-btn').textContent = uiTexts[lang].startQuiz;
        }

        function startQuiz() {
            userName = document.getElementById('name-input').value.trim();
            if (userName === "") {
                document.getElementById('name-input').classList.add('border-red-500');
                return;
            }
            sessionStorage.setItem('quizUserName', userName);
            sessionStorage.setItem('quizLang', quizLang);
            nameScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            document.getElementById('submit-btn').textContent = uiTexts[quizLang].submit;
            loadQuestion();
            startTimer();
            window.addEventListener('beforeunload', beforeUnloadHandler);
        }

        function startTimer() {
            const startTime = Date.now() - (secondsElapsed * 1000);
            timerInterval = setInterval(() => {
                secondsElapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
                const seconds = (secondsElapsed % 60).toString().padStart(2, '0');
                document.getElementById('timer').textContent = `${minutes}:${seconds}`;
            }, 1000);
        }

        function loadQuestion() {
            sessionStorage.setItem('quizAnswers', JSON.stringify(userAnswers));
            sessionStorage.setItem('quizCurrentQuestion', currentQuestionIndex);

            const questionData = quizData[currentQuestionIndex];
            document.getElementById('progress-text').textContent = uiTexts[quizLang].questionProgress(currentQuestionIndex + 1, quizData.length);
            document.getElementById('question-text').textContent = questionData.q[quizLang];
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            questionData.o[quizLang].forEach((option, index) => {
                const optionElement = document.createElement('button');
                optionElement.className = 'quiz-option text-left w-full bg-gray-700 p-4 rounded-lg border-2 border-gray-600 hover:border-cyan-400 font-medium';
                optionElement.innerHTML = `<span class="font-bold mr-3">${String.fromCharCode(65 + index)}.</span> ${option}`;
                if (userAnswers[currentQuestionIndex] === index) {
                    optionElement.classList.add('selected');
                }
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                loadQuestion(); // Re-load to show selection on the last question
            }
        }

        function showConfirmationModal() {
            const unansweredCount = userAnswers.filter(a => a === null).length;
            document.getElementById('modal-title').textContent = uiTexts[quizLang].modalTitle;
            if (unansweredCount > 0) {
                document.getElementById('modal-text').textContent = uiTexts[quizLang].modalText(unansweredCount);
            } else {
                document.getElementById('modal-text').textContent = uiTexts[quizLang].modalTextAllAnswered;
            }
            document.getElementById('modal-cancel-btn').textContent = uiTexts[quizLang].modalCancel;
            document.getElementById('modal-confirm-btn').textContent = uiTexts[quizLang].modalConfirm;
            confirmationModal.classList.remove('hidden');
        }

        function hideConfirmationModal() {
            confirmationModal.classList.add('hidden');
        }

        function finalizeQuiz() {
            hideConfirmationModal();
            clearInterval(timerInterval);
            window.removeEventListener('beforeunload', beforeUnloadHandler);
            sessionStorage.clear();

            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');

            displayResults();
            sendTelegramReport();
        }

        function displayResults() {
            let score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === quizData[index].a) score++;
            });
            const totalQuestions = quizData.length;
            const accuracy = totalQuestions > 0 ? ((score / totalQuestions) * 100).toFixed(1) : 0;
            const minutes = Math.floor(secondsElapsed / 60).toString().padStart(2, '0');
            const seconds = (secondsElapsed % 60).toString().padStart(2, '0');

            document.getElementById('result-title').textContent = `${uiTexts[quizLang].resultTitle} ${userName}`;
            document.getElementById('score-label').textContent = uiTexts[quizLang].scoreLabel;
            document.getElementById('time-label').textContent = uiTexts[quizLang].timeLabel;
            document.getElementById('accuracy-label').textContent = uiTexts[quizLang].accuracyLabel;
            document.getElementById('review-title').textContent = uiTexts[quizLang].reviewTitle;

            document.getElementById('score').textContent = `${score} / ${totalQuestions}`;
            document.getElementById('time-taken').textContent = `${minutes}:${seconds}`;
            document.getElementById('accuracy').textContent = `${accuracy}%`;

            const reviewContainer = document.getElementById('review-container');
            reviewContainer.innerHTML = '';
            quizData.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const correctAnswer = question.a;
                const isCorrect = userAnswer === correctAnswer;
                const resultColor = isCorrect ? 'border-green-500' : (userAnswer === null ? 'border-gray-500' : 'border-red-500');

                let reviewHTML = `<div class="bg-gray-900 p-4 rounded-lg border-l-4 ${resultColor}"><p class="font-bold text-white mb-3">${index + 1}. ${question.q[quizLang]}</p>`;
                question.o[quizLang].forEach((option, optionIndex) => {
                    let indicator = '';
                    if (optionIndex === correctAnswer) indicator = ` <span class="font-bold text-green-400">(${uiTexts[quizLang].correctAnswer})</span>`;
                    if (optionIndex === userAnswer && userAnswer !== correctAnswer) indicator = ` <span class="font-bold text-red-400">(${uiTexts[quizLang].yourAnswer})</span>`;
                    reviewHTML += `<p class="ml-4 text-gray-300">${String.fromCharCode(65 + optionIndex)}. ${option}${indicator}</p>`;
                });
                if (userAnswer === null) reviewHTML += `<p class="ml-4 mt-2 text-yellow-400 font-bold">${uiTexts[quizLang].notAnswered}</p>`;
                reviewHTML += `</div>`;
                reviewContainer.innerHTML += reviewHTML;
            });
        }

        async function sendTelegramReport() {
            const telegramStatus = document.getElementById('telegram-status');
            telegramStatus.textContent = uiTexts[quizLang].telegramSending;
            telegramStatus.className = 'text-center my-4 font-semibold text-yellow-400';

            const botToken = '7515435403:AAFZy4lBut4oWZ1L9JYHtsqskaZzv_q97K0';
            const channelId = '-1002833692420';

            let score = userAnswers.reduce((acc, ans, i) => acc + (ans === quizData[i].a ? 1 : 0), 0);
            const accuracy = ((score / quizData.length) * 100).toFixed(1);
            const timeStr = `${Math.floor(secondsElapsed / 60)}m ${secondsElapsed % 60}s`;
            const lang = quizLang;

            let report = `*ðŸ”” New Quiz Submission!* ðŸ””\n\n`;
            report += `*ðŸ§‘â€ðŸŽ“ Name:* ${userName}\n`;
            report += `*ðŸ“Š Score:* ${score} / ${quizData.length}\n`;
            report += `*ðŸŽ¯ Accuracy:* ${accuracy}%\n`;
            report += `*â±ï¸ Time Taken:* ${timeStr}\n\n`;
            report += `*ðŸ“ Detailed Review (${lang.toUpperCase()}):*\n`;
            report += `------------------------------------\n`;

            quizData.forEach((q, index) => {
                const userAnswerIndex = userAnswers[index];
                const correctAnswerIndex = q.a;
                const isCorrect = userAnswerIndex === correctAnswerIndex;
                const statusIcon = isCorrect ? 'âœ…' : 'âŒ';
                
                report += `*Q${index + 1}:* ${q.q[lang]}\n`;
                
                if (userAnswerIndex !== null) {
                    report += `*${uiTexts[lang].yourAnswer}:* ${q.o[lang][userAnswerIndex]}\n`;
                } else {
                    report += `*${uiTexts[lang].yourAnswer}:* ${uiTexts[lang].notAnswered}\n`;
                }
                
                if (!isCorrect) {
                     report += `*${uiTexts[lang].correctAnswer}:* ${q.o[lang][correctAnswerIndex]}\n`;
                }
                report += `${statusIcon}\n\n`;
            });
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: channelId, text: report, parse_mode: 'Markdown' })
                });
                const result = await response.json();
                if (result.ok) {
                    telegramStatus.textContent = uiTexts[lang].telegramSuccess;
                    telegramStatus.className = 'text-center my-4 font-semibold text-green-400';
                } else { throw new Error(result.description); }
            } catch (error) {
                console.error("Telegram API Error:", error);
                telegramStatus.textContent = uiTexts[lang].telegramError;
                telegramStatus.className = 'text-center my-4 font-semibold text-red-400';
            }
        }

        function beforeUnloadHandler(e) {
            e.preventDefault();
            e.returnValue = '';
        }

        window.onload = () => {
            const savedState = {
                name: sessionStorage.getItem('quizUserName'),
                lang: sessionStorage.getItem('quizLang'),
                answers: sessionStorage.getItem('quizAnswers'),
                index: sessionStorage.getItem('quizCurrentQuestion')
            };
            if (savedState.name && savedState.lang && savedState.answers && savedState.index) {
                userName = savedState.name;
                quizLang = savedState.lang;
                userAnswers = JSON.parse(savedState.answers);
                currentQuestionIndex = parseInt(savedState.index, 10);
                
                langScreen.classList.add('hidden');
                nameScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                document.getElementById('submit-btn').textContent = uiTexts[quizLang].submit;
                loadQuestion();
                startTimer();
                window.addEventListener('beforeunload', beforeUnloadHandler);
            }
        };
    </script>
</body>
</html>

